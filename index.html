<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lines</title>
    <script src="node_modules/d3/build/d3.js"></script>

</head>
<body>
<h1>Represent lines by numbers</h1>
<button type="button" name="button" onClick="reshuffle()">Shuffle</button>
<div id="viz">

</div>
<script>
    let numbers = [10,20,30,50,7];

    let svg = d3.select("#viz")
        .append("svg")
        .attr("width", 200)
        .attr("height", 200);

  svg = svg.append('g')
    .attr('transform','translate(10,10)');


    let xScale = d3.scaleLinear()
      .domain([0,100])
      .range([0,200]);

    let yScale = d3.scaleLinear()
      .domain([0,13])
      .range([0,200]);

    function reshuffle(){

      numbers = d3.range(3 + Math.round(Math.random()*10))
        .map(function(d){
          return Math.round(Math.random()*100);
        });

      // Bad way to do the same thing

      // numbers.length = 3 + Math.round(Math.random()*10);
      // for(let i =0; i < numbers.length; i++){
      //   numbers[i] = Math.round(Math.random()*100);
      // }
      console.log(numbers);
      redraw();
    }

    function redraw() {
      let lines = svg.selectAll("line")
          .data(numbers);

      // <line x1='0' y1='0' x2='10' y2='10'/>
      lines.enter()     // ENTER
          .append("line")
          .attr("stroke-weight",1)
          .attr("stroke", "black");

      // EXIT
      lines.exit().remove();

      svg.selectAll('line')   //UPDATE
          .attr("x1", 0)
          .attr("x2", function(d,i){
              return xScale(d);
          })
          .attr("y1",function(d,i){
              return yScale(i);
          })
          .attr("y2",function(d,i){
              return yScale(i);
          })
      ;
    }


    redraw();

</script>
</body>
</html>
